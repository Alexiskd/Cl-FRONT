import{b as r,j as s,C as g,p as t,q as C,H as b,A as y,G as a,z as n,F as c}from"./index-6iWKD2A3.js";const E=()=>{const[i,j]=r.useState([]),[d,l]=r.useState(!1),[o,x]=r.useState(null);r.useEffect(()=>{(async()=>{l(!0);try{const e=await fetch("https://cl-back.onrender.com/commande/paid",{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Erreur lors de la récupération (status ${e.status})`);const u=await e.json();j(Array.isArray(u.data)?u.data:[]),x(null)}catch(e){console.error("Erreur lors du chargement des commandes :",e),x("Erreur lors du chargement des commandes.")}finally{l(!1)}})()},[]);const f=i.length,h=i.reduce((m,e)=>m+parseFloat(e.prix||0),0),p=h/(1+.2);return s.jsxs(g,{maxWidth:"lg",sx:{py:4,fontFamily:'"Poppins", sans-serif',backgroundColor:"rgba(240, 255, 245, 0.5)"},children:[s.jsx(t,{variant:"h4",align:"center",gutterBottom:!0,sx:{color:"#388e3c",fontWeight:600},children:"Statistiques des Commandes"}),d&&s.jsx(C,{sx:{display:"flex",justifyContent:"center",my:4},children:s.jsx(b,{color:"success"})}),o&&s.jsx(y,{severity:"error",children:o}),!d&&!o&&s.jsxs(a,{container:!0,spacing:3,justifyContent:"center",sx:{mt:2},children:[s.jsx(a,{item:!0,xs:12,md:4,children:s.jsx(n,{sx:{boxShadow:3,borderRadius:3},children:s.jsxs(c,{children:[s.jsx(t,{variant:"h6",sx:{fontWeight:500,mb:1},children:"Nombre de commandes"}),s.jsx(t,{variant:"h4",sx:{color:"#388e3c",fontWeight:600},children:f})]})})}),s.jsx(a,{item:!0,xs:12,md:4,children:s.jsx(n,{sx:{boxShadow:3,borderRadius:3},children:s.jsxs(c,{children:[s.jsx(t,{variant:"h6",sx:{fontWeight:500,mb:1},children:"Total TTC"}),s.jsxs(t,{variant:"h4",sx:{color:"#388e3c",fontWeight:600},children:[h.toFixed(2)," €"]})]})})}),s.jsx(a,{item:!0,xs:12,md:4,children:s.jsx(n,{sx:{boxShadow:3,borderRadius:3},children:s.jsxs(c,{children:[s.jsx(t,{variant:"h6",sx:{fontWeight:500,mb:1},children:"Total HT"}),s.jsxs(t,{variant:"h4",sx:{color:"#388e3c",fontWeight:600},children:[p.toFixed(2)," €"]})]})})})]})]})};export{E as default};
